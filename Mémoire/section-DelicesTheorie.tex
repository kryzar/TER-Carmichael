\section{Délices de la théorie}

Fort heureusement, certaines propriétés fondamentales des \emph{entiers} de Carmichael restent vraies dans le cadre plus général des \emph{idéaux} de Carmichael. Tout d'abord, le petit théorème de Fermat se généralise aux corps de nombres galoisiens : dans une telle extension, un nombre premier engendre un idéal qui est soit premier, soit de Carmichael. Plus formellement, vient ceci.
\begin{theoreme}[petit théorème de Fermat généralisé, 2.3 dans l'article]\label{ptf}
	Soient $p$ un nombre premier et $K$ un corps de nombre galoisien tel que $p\nmid \Disc(K)$. Alors, pour tout entier algébrique $\alpha \in \OK$, on a $$\alpha^{\Norm_{K/\Q}(p)} \equiv \alpha \pmod{p\OK}.$$
\end{theoreme}

\begin{proof}
	Comme $p\nmid \Disc(K)$, le nombre premier $p$ n'est pas ramifié dans $\OK$. Comme l'extension $K/\Q$ est galoisienne, les indices de ramifications et degrés résiduels des idéaux de $\OK$ au dessus de $\p$ sont égaux. L'idéal $p\OK$ est donc de la forme \[p\OK = \p_1\cdot \dots \p_r.\] Soit donc $f$ ce degré résiduel. On a $ef = [K : \Q]$ et surtout que $f$ divise $[ K : \Q ]$. Ainsi, pour tout indice $1\leq i \leq r$, il vient \[ \Norm(\p_i) - 1 = p^f - 1 \mid p^{[K : \Q]} - 1 = \Norm(p\OK) - 1.\] L'idéal $\OK$ vérifie donc le critère de Korselt généralisé \ref{korselt-generalise}. Il est donc soit premier, soit de Carmichael.
\end{proof}

Fait tout à fait remarquable, l'auteur de l'article fournit une réciproque au petit théorème de Fermat dans ce nouveau cadre des idéaux de Carmichael.

\begin{theoreme}[réciproque du petit théorème de Fermat généralisé, 2.3 dans l'article]
	Soit $n>2$ un entier composé. Alors il existe un corps \emph{quadratique} $K$ vérifiant $n\nmid \Disc(K)$ et un entier algébrique $\alpha \in \OK$ tels que $$\alpha^{\Norm_{K/\Q}(n)} \not\equiv \alpha \pmod{n\OK}.$$
\end{theoreme}

\begin{MotSurPreuve}
	À l'instar de beaucoup d'autres résultats de l'article, la preuve de cet énoncé jouit à la fois d'une complexité technique raisonnable et d'une grande ingéniosité. Connaissant un diviseur $p$ premier de $n$, l'auteur construit un corps quadratique $K = \Q\left(\sqrt{(-1)^\frac{p-1}{2} p}\right)$ dans lequel $n$ n'est pas de Carmichael. Ce dernier point se démontre avec des techniques de base de la ramification. \\
\end{MotSurPreuve}

Nous pouvons de plus mettre à bout ces deux résultats pour fournir cette délicieuse équivalence.

\begin{theoreme}[petit théorème de Fermat généralisé et sa réciproque]\label{ptf-reciproque}
	Soit $n>2$ un entier. Alors $n$ est premier \ssi pour tout corps \emph{quadratique} $K$ vérifiant $n\nmid \Disc(K)$ et tout entier algébrique $\alpha \in \OK$, on a $$\alpha^{\Norm_{K/\Q}(n)} \equiv \alpha \pmod{n\OK}.$$
\end{theoreme}

Au delà de sa force théorique, cette énoncé semble porter une valeur historique majeure. Le test de primalité de Fermat était le seul test de primalité à ne pas disposer d'une réciproque (pour le test d'Euler par exemple, c'est une équivalence). Cette absence de réciproque semblait bien être le prix à payer pour sa simplicité et son efficacité. Il aura certes fallu aller chercher la réciproque dans les corps de nombres, mais l'énoncé prouve que les corps quadratiques. Ces objets ne sont d'ailleurs pas si loin de l'arithmétique classique : Gauss les étudiait déjà. \\

Comme certains outils de calcul formel sont capables de décomposer un idéal de l'anneau d'entiers d'un corps de nombres en produit d'idéaux premiers dudit anneau\footnote{C'est le cas par exemple de SageMath et PariGP \NTS{mettre liens}. L'auteur de ce texte a choisi d'utiliser Sage et s'en servira beaucoup par la suite.}, il est facile d'implémenter le critère de Korselt. Le petit théorème de Fermat généralisé \ref{ptf} nous permet donc d'écrire le critère de composition suivant, basé sur le critère de Korselt.

\vspace{1em}
\begin{algorithm}[H]\label{test-primalite-korselt}
\caption{Critère de composition de Korselt dans les corps de nombres galoisiens}
\KwIn{$n$ (entier à tester) \\
	$\mathscr{L}$ (liste de corps de nombres galoisiens)}
\ForEach{$K$ dans $\mathscr{L}$}{
	\If{$n$ et $\Disc(K)$ sont premiers entre eux}{
		\If{$n\OK$ ne vérifie pas le critère de Korselt}{
			\KwRet{$n\OK$ n'est pas de Carmichael et $n$ est composé} \\
			\textbf{arrêter le programme.}
		}
	}
}
\end{algorithm}
\vspace{1em}


Un autre résultat d'importance (démontré avant le petit théorème de Fermat généralisé dans l'article) est la généralisation du critère de Korselt \ref{korselt}. C'est ce résultat que l'on utilise en premier lieu pour déterminer si un entier est de Carmichael.

\begin{theoreme}[critère de Korselt généralisé, 2.2 dans l'article]\label{korselt-generalise}
	Soient $K$ un corps de nombres et $I$ un idéal de $\OK$. On prend garde à supposer que $I$ est composé. Alors $I$ est de Carmichael \ssi $I$ est sans facteurs carrés et pour tout idéal premier $\P$ divisant $I$, on a $$\Norm(\P) - 1 \mid \Norm(I) - 1.$$
\end{theoreme}

\begin{proof}
	Commençons par le sens réciproque. Soit $\alpha\in \OK$ un entier algébrique et $\p$ un idéal premier de $\OK$ divisant $I$. Si $\alpha \notin \OK$, viennent $\alpha^{\Norm(\p) - 1} \equiv \alpha \pmod{p}$ et donc $$\alpha^{\Norm(I) - 1} \equiv \alpha \pmod{p},$$ car $\Norm(\p) - 1\mid \Norm(I) - 1$ par hypothèse. Si désormais $\alpha\in \p$, la dernière congruence est toujours vérifiée. L'idéal $I$ étant de plus sans facteurs carrés (hypothèse), il est de la forme $I = \p_1 \cdots \p_r,$ les $\p_i$ étant des idéaux premiers distincts de $\OK$. Ces idéaux sont même maximaux (anneau de Dedekind) et donc comaximaux, d'où un isomorphisme d'anneaux $$\OK \big/\left(\p_1\cdot \dots \cdot \p_r\right) \simeq \OK\big/\p_1\times \dots \times \OK\big/ \p_r$$ et la congruence \[\alpha^{\Norm(I)} \equiv \alpha \pmod{I}.\]

	Démontrons cette fois le sens direct. La preuve se fait en deux temps, on montre les relations de divisibilité puis que $I$ est sans facteur carré. Écrivons $I = \p_1^{e_1} \cdot \dots \cdot \p_r^{e_r}$, les $\p_i$ étant des idéaux premiers de $\OK$ distincts. Pour tout indice $1\leqslant i \leqslant r$ donnons nous $\alpha_i\in \OK$ un élément dont la classe modulo $\p_i$ engendre le groupe quotient $(\OK/\p_i)^\times$. Un tel élément existe car $\OK/\p_i$ est un corps fini et que le groupe des inversibles d'un corps fini est cyclique. En particulier, $\alpha_i$ n'est \emph{pas} dans $\p_i$. On a alors \[\alpha_i^{\Norm(I) - 1} \equiv \alpha_i \pmod{\p_i}\] (comme dans le paragraphe précédent) puis que l'ordre de $\alpha_i$ modulo $\p_i$ divise $\Norm(I) - 1$ (théorème de Lagrange). Cet ordre étant $\Norm(\p_i) - 1$, on en déduit la division désirée. 

	Démontrons désormais que $I$ est sans facteurs carrés. Supposons qu'il existe un idéal premier $\p$ de $\OK$ tel que $p^2\mid \OK$ et posons \[H = \left(\OK\big/\p^2\right)^\times.\] On a \[\left|H\right| = \Norm(\p)(\Norm(\p) - 1).\] Soit $p\in \Z$ l'unique nombre premier tel que $p\Z = \p\cap \Z$. L'entier $\Norm(\p)$ est une puissance de $\p$, d'où $p\mid \Norm(\p)$ et \[p\mid \left| H \right|.\] Le théorème de Cauchy abélien assure alors qu'il existe un élément $\alpha \in H$ d'ordre $p$. Comme $I$ est de Carmichael par hypothèse et que $\alpha\notin \p^2$, on a $\alpha^{\Norm(I)-1} \equiv 1 \pmod{\p^2}$ puis $\alpha^{\Norm(I) - 1} \equiv 1 \pmod{\p^2}$ et \[p \mid \Norm(I) - 1.\] Comme $p\mid \Norm(I)$, cela constitue une contradiction. L'idéal $I$ est donc sans facteur carré.

\end{proof}

\begin{remarque}
	Le critère de Korselt que nous connaissons dans le cadre de l'arithmétique se déduit immédiatement du critère de Korselt généralisé en prenant $K=\Q$.
\end{remarque}

\begin{remarque}
	Il faut ici se montrer vigilant avec la nomenclature. Un idéal $I$ est de Carmichael dans un corps de nombres $K$ si $I$ est un idéal \textbf{composé} qui \emph{en plus de cela}, vérifie l'identité \ref{congruence-Carmichael} pour tout entier algébrique $\alpha \in \OK$. \\ 

	Si l'on a un corps de nombres $L$ et un idéal $J$ de $\OK$, montrer que $\Norm(\P) - 1\mid \Norm(J) - 1$ pour tout idéal premier $\P$ de $\OL$ divisant $J$ ne suffit pas. La preuve du critère de Korselt généralisé \ref{korselt-generalise} nous enseigne que si $J$ est premier, $J$ vérifie également cette identité. Il faut donc indépendamment montrer que $J$ est composé si l'on veut montrer que $J$ est un idéal de Carmichael. Là est le cœur du problème. L'auteur de l'article fait lui-même une petite erreur en oubliant cette hypothèse dans l'énoncé du théorème 2.7 : il doit y supposer $n$ composé.
\end{remarque}

Avant de poursuivre, donnons un lemme qui permettra d'alléger les énoncés de l'article.

\begin{lemme}
	Soient $n$ un entier et $K$ un corps de nombres. Si $n$ est de Carmichael dans $K$, alors $n$ et $\Disc(K)$ sont premiers entre eux.
\end{lemme}

\begin{proof}
	Si $n$ et $\Disc(K)$ ne sont pas premiers entre eux, $n$ a un facteur premier qui se ramifie dans $\OK$. L'idéal $n\OK$ a donc un facteur carré, ce qui l'empêche d'être un idéal de Carmichael d'après le critère de Korselt généralisé \ref{korselt-generalise}.
\end{proof}

Ces résultats fournissent un début de théorie confortable, qui nous laisse envisager l'avenir avec espoir. Nous pouvons dès à présent nous confronter à une étude plus spécifique, celle des corps quadratiques.
